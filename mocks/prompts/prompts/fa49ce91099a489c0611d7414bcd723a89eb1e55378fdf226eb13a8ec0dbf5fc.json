{
  "prompt_hash": "sha256:fa49ce91099a489c0611d7414bcd723a89eb1e55378fdf226eb13a8ec0dbf5fc",
  "prompt_id": "g1/prompt",
  "created_at": "2025-12-17T16:25:35+01:00",
  "system_prompt": "You are a senior QA engineer.\n\nYour task is to generate TWO outputs:\n\n1) A detailed test plan in Markdown.\n2) A list of NEW test case suggestions in JSON.\n\nIMPORTANT RULES:\n- Output MUST follow the exact format below.\n- The JSON MUST be valid and parsable.\n- The JSON MUST match this schema:\n\n[\n  {\n    \"title\": string,\n    \"priority\": \"HIGH\" | \"MEDIUM\" | \"LOW\",\n    \"type\": \"functional\" | \"regression\" | \"security\" | \"performance\",\n    \"given\": string,\n    \"when\": string,\n    \"then\": string,\n    \"mapped_existing_test_key\": string | null\n  }\n]\n\nFORMAT (STRICT):\n\n---MARKDOWN---\n<markdown content>\n\n---SUGGESTIONS_JSON---\n<json array>",
  "user_prompt": "JIRA ISSUE\n----------\nKey: US-402\nSummary: Apply dealer discount with approval rules\nDescription:\nAs a dealer user, I want to apply a discount on a quotation, so that I can adjust pricing within allowed commercial rules.\n\nAcceptance Criteria:\nAC1: Discounts below the threshold are automatically accepted.\nAC2: Discounts above the threshold require manager approval.\nAC3: Discount approval decisions must be auditable.\n\nEXISTING XRAY TESTS\n------------------\n['TEST-US-402-1: Apply discount below approval threshold', 'TEST-US-402-2: Apply discount above approval threshold', 'TEST-US-402-3: Audit discount approval decision']\n\nCODE CHANGES\n------------\n['backend/services/discount_service.py', 'backend/routes/discount_routes.py', 'backend/audit/audit_logger.py']\n\nInstructions:\n- Reuse existing tests where relevant.\n- Propose NEW test cases only in the JSON suggestions.\n- Be precise and actionable."
}